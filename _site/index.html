<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta name="author" content="donglei" />
    
    <title>DongLei's Blog</title>
    
    <link rel="shortcut icon" href="/favicon.ico">
    <link href="/atom.xml" rel="alternate" title="DongLei's Blog" type="application/atom+xml" />
    <link rel="stylesheet" href="/media/css/style.css">
    <link rel="stylesheet" href="/media/css/github.css">
    <link rel="stylesheet" href="/media/css/fontawesome.css">
    <script src="/media/js/jquery-1.7.1.min.js" type="text/javascript" charset="utf-8"></script>

    
    <!--highlight.js Start-->
        <link rel="stylesheet" href="http://yandex.st/highlightjs/8.0/styles/mono-blue.min.css">
        <script src="http://yandex.st/highlightjs/8.0/highlight.min.js"></script>
    <script>
      hljs.configure({tabReplace: '    '});
      hljs.initHighlightingOnLoad();
    </script>
    <!--highlight.js End-->
  
    <!--mathjax start-->
    <script type="text/javascript"
            src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    </script>
    <!--mathjax end-->

  </head>
  <body>
      <div id="main" role="main">
        <header>
          <div id="header">
            <h1><a title="DongLei's Blog" class="" href="/">DongLei's Blog</a></h1>
          </div>
          <nav>
            
            <span><a title="Archive" href="/archive.html"><i class="fa fa-list-ul"></i></a></span>
            
            <span><a title="Tags" href="/tags.html"><i class="fa fa-tags"></i></a></span>
            
            <span><a title="About" href="/about.html"><i class="fa fa-user"></i></a></span>
            
            <span><a title="Gallery" href="http://donglei.name"><i class="fa fa-film"></i></a></span>
            
            <span><a title="Toolkit" href="/toolkit.html"><i class="fa fa-link"></i></a></span>
            
            <span><a title="Subscribe" href="/atom.xml"><i class="fa fa-rss"></i></a></span>
            
          </nav>
        </header>
        <div id="content">
        <div>
  <ul class="listing">
  
  <article class="content">
    <section class="title">
      <h2><a href="/2014/10/visualize-this-8.html">Visualize This 8 | 数据可视化笔记 8</a></h2>
    </section>
    <section class="meta">
    <span class="time">
      <time datetime="2014-10-09">2014-10-09</time>
    </span>
    
    <span class="tags">
      
      <a href="/tags.html#Data" title="Data">#Data</a>
      
      <a href="/tags.html#Visualization" title="Visualization">#Visualization</a>
      
      <a href="/tags.html#Illustrator" title="Illustrator">#Illustrator</a>
      
      <a href="/tags.html#Python" title="Python">#Python</a>
      
    </span>
    
    <!-- BEGIN this would not work on any other domain -->
    <span
      class           = 'like-wrapper'
      like-shortname  = '{"config"=>false, "id"=>"piznblog"}'
      like-identifier = ''
      like-name       = 'Visualize This 8 | 数据可视化笔记 8'
      like-link       = 'http://donglei.name/index.html'
      like-btn        = '&#xf087;'
    ></span>
    <script type="text/javascript">
      var l = document.createElement('script'); l.type = 'text/javascript'; l.async = true;
      l.src = 'http://www.like-btn.com/javascript/widget.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(l);
    </script>
    <!-- END this would not work on any other domain -->
    </section>
    <section class="post">
    <p>最近又尝试了几种新的可视化方法。一个是试了下Python中的pandas这个包，可以增强Python处理数据的能力，用起来跟R一样方便，顺便试了试Bettencourt在<a href="http://www.plosone.org/article/info%3Adoi%2F10.1371%2Fjournal.pone.0013541#abstract0">PLOS ONE文章</a>中写的一种处理平均数的办法。简单的说，因为像GDP等变量随人口的变化不是线性的，而是异速增长，有个幂率系数，那么用人均GDP衡量城市可能会出现一个问题就是：大的城市人口多，天生人均GDP也高，如何消除这个影响呢？他们用GDP除以人口的一个幂次，这个幂次是由人口和GDP取双对数回归得出出的系数。用公式来表示就是，因为：</p>

<p>$$
GDP = A * Population^\beta
$$</p>

<p>那么，我在算人均GDP的时候，为了消除这个规模效应的影响就可以这样算：</p>

<p>$$
\epsilon = \log \frac{GDP}{A * Population^\beta}
$$</p>

<p>这样可以比不同指标之间消除城市规模效应后的影响。我也简单用Python画了一个中国的情况：</p>

<p><img src="/media/files/2014/10/ChinaGDPWage.png" alt="ChinaGDPWage" /></p>

<p>横轴是GDP，纵轴是工资，理论上GDP相对不那么高，工资比较高的城市应该是生活比较幸福的，因为相对购买力比较强，而那些GDP很高但工资很低的城市就比较悲惨。（数据说明：统计范围是二百多个中国城市市辖区，人口数据来自六普，GDP和工资数据来自2011年城市统计年鉴。）</p>

<p>代码如下：</p>

<pre><code># coding: utf-8

import pandas

import numpy as np
import matplotlib.pyplot as plt

data = pandas.read_table(r"test01.csv",sep=";")

r = np.sqrt(data["StdResiGDP"]**2 + data["StdResiWage"]**2)

theta = np.arctan2(data["StdResiWage"],data["StdResiGDP"])
area = 40 * r**2
colors = r

ax = plt.subplot(111, polar=True)
c = plt.scatter(theta, r, c=colors, s=area, cmap=plt.cm.rainbow)
c.set_alpha(0.75)


plt.show()
</code></pre>

<hr />

<p>另外，最近做文献综述，用illustrator把复杂科学(Complex Science)的研究脉络梳理了下，从上到下大致是：数学、几何领域；生物领域；自组织、网络科学领域，控制论、与社会经济领域；计算机仿真领域。主要基于<a href="http://www.art-sciencefactory.com/complexity-map_feb09.html">前人的工作</a>重新绘制了一遍，添加了关于城市研究的一些组织和个人。</p>

<p><img src="/media/files/2014/10/complexity-small.png" alt="complexity-small" /></p>

<p>我还从头梳理了一下城市实证研究方面自1900年以来重要的思想和模型，到时候一并放上来。</p>

    </section>
    </article>
  
  </ul>
  <div class="divider"></div>
  <ul class="listing main-listing">
    <li class="listing-seperator">Happend earlier this year</i>
  
  
    
    
    <li class="listing-item">
      <time datetime="2014-09-30">2014-09-30</time>
      <a href="/2014/09/notes-2.html" title="Notes 2 | 札记 2">Notes 2 | 札记 2</a>
    </li>
  
    
    
    <li class="listing-item">
      <time datetime="2014-09-28">2014-09-28</time>
      <a href="/2014/09/blog-one-year.html" title="Blog One Year | 博客写作一周年记">Blog One Year | 博客写作一周年记</a>
    </li>
  
    
    
    <li class="listing-item">
      <time datetime="2014-09-05">2014-09-05</time>
      <a href="/2014/09/raw-data-from-figures.html" title="Raw Data from Figures | 从图片中提取数据">Raw Data from Figures | 从图片中提取数据</a>
    </li>
  
    
    
    <li class="listing-item">
      <time datetime="2014-08-14">2014-08-14</time>
      <a href="/2014/08/grapefruit.html" title="Grapefruit | 买柚子风波">Grapefruit | 买柚子风波</a>
    </li>
  
    
    
    <li class="listing-item">
      <time datetime="2014-08-13">2014-08-13</time>
      <a href="/2014/08/doves.html" title="Doves | 梁朝伟喂鸽子">Doves | 梁朝伟喂鸽子</a>
    </li>
  
    
    
    <li class="listing-item">
      <time datetime="2014-08-03">2014-08-03</time>
      <a href="/2014/08/the-three-body.html" title="The Three Body | 三体">The Three Body | 三体</a>
    </li>
  
    
    
    <li class="listing-item">
      <time datetime="2014-07-21">2014-07-21</time>
      <a href="/2014/07/instrumental-variables.html" title="Instrumental Variables | 工具变量">Instrumental Variables | 工具变量</a>
    </li>
  
    
    
    <li class="listing-item">
      <time datetime="2014-07-06">2014-07-06</time>
      <a href="/2014/07/side-quests.html" title="Side Quests | 支线剧情">Side Quests | 支线剧情</a>
    </li>
  
    
    
    <li class="listing-item">
      <time datetime="2014-06-20">2014-06-20</time>
      <a href="/2014/06/boosting-your-energy.html" title="Boosting Your Energy | "精力"秘籍">Boosting Your Energy | "精力"秘籍</a>
    </li>
  
    
    
    <li class="listing-item">
      <time datetime="2014-06-04">2014-06-04</time>
      <a href="/2014/06/getting-cleaning-and-visualizing-data-1.html" title="Getting Cleaning and Visualizing Data 1 | 数据获取分析与表达 1">Getting Cleaning and Visualizing Data 1 | 数据获取分析与表达 1</a>
    </li>
  
    
    
    <li class="listing-item">
      <time datetime="2014-05-31">2014-05-31</time>
      <a href="/2014/05/research.html" title="Research | 施一公老师讲学术研究">Research | 施一公老师讲学术研究</a>
    </li>
  
    
    
    <li class="listing-item">
      <time datetime="2014-05-22">2014-05-22</time>
      <a href="/2014/05/craftsmanship.html" title="Craftsmanship | 工匠精神与情怀">Craftsmanship | 工匠精神与情怀</a>
    </li>
  
    
    
    <li class="listing-item">
      <time datetime="2014-05-15">2014-05-15</time>
      <a href="/2014/05/muji-award.html" title="Muji Award | 从MUJI AWARD 04 看信息整理">Muji Award | 从MUJI AWARD 04 看信息整理</a>
    </li>
  
    
    
    <li class="listing-item">
      <time datetime="2014-05-09">2014-05-09</time>
      <a href="/2014/05/software-toolbox.html" title="Software ToolBox | 软件工具箱">Software ToolBox | 软件工具箱</a>
    </li>
  
    
    
    <li class="listing-item">
      <time datetime="2014-04-27">2014-04-27</time>
      <a href="/2014/04/crowdfunding-booklist.html" title="Crowdfunding Booklist | 众筹书单">Crowdfunding Booklist | 众筹书单</a>
    </li>
  
    
    
    <li class="listing-item">
      <time datetime="2014-04-10">2014-04-10</time>
      <a href="/2014/04/note-1.html" title="Notes 1 | 札记 1">Notes 1 | 札记 1</a>
    </li>
  
    
    
    <li class="listing-item">
      <time datetime="2014-04-03">2014-04-03</time>
      <a href="/2014/04/quantitative-research.html" title="Quantitative Research | 定量研究">Quantitative Research | 定量研究</a>
    </li>
  
    
    
    <li class="listing-item">
      <time datetime="2014-03-14">2014-03-14</time>
      <a href="/2014/03/visualize-this-7.html" title="Visualize This 7 | 数据可视化笔记 7">Visualize This 7 | 数据可视化笔记 7</a>
    </li>
  
    
    
    <li class="listing-item">
      <time datetime="2014-03-09">2014-03-09</time>
      <a href="/2014/03/malaysia-airlines.html" title="Malaysia Airlines | 马航事件">Malaysia Airlines | 马航事件</a>
    </li>
  
    
    
    <li class="listing-item">
      <time datetime="2014-02-14">2014-02-14</time>
      <a href="/2014/02/design-rethink-3.html" title="Design Rethink 3 | 设计反思 3 ——关于参数化">Design Rethink 3 | 设计反思 3 ——关于参数化</a>
    </li>
  
    
    
    <li class="listing-item">
      <time datetime="2014-02-09">2014-02-09</time>
      <a href="/2014/02/visualize-this-6.html" title="Visualize This 6 | 数据可视化笔记 6">Visualize This 6 | 数据可视化笔记 6</a>
    </li>
  
    
    
    <li class="listing-item">
      <time datetime="2014-01-30">2014-01-30</time>
      <a href="/2014/01/interesting-physics-1.html" title="Interesting Physics 1 | 有趣的物理 1">Interesting Physics 1 | 有趣的物理 1</a>
    </li>
  
    
    
    <li class="listing-item">
      <time datetime="2014-01-14">2014-01-14</time>
      <a href="/2014/01/visualize-this-5.html" title="Visualize This 5 | 数据可视化笔记 5">Visualize This 5 | 数据可视化笔记 5</a>
    </li>
  
    
    
    <li class="listing-item">
      <time datetime="2014-01-06">2014-01-06</time>
      <a href="/2014/01/talk-with-prof-qin-2.html" title="Talk With Prof. Qin 2 | 与秦老师的讨论 2">Talk With Prof. Qin 2 | 与秦老师的讨论 2</a>
    </li>
  
    
    
    
    <li class="listing-seperator"><a href="/archive.html">Long long ago</a></li>
  </ul>
</div>


        </div>
        <footer>
          <div>
            
            &copy; 2013 ~ 2014 donglei | powered by jekyll | themed by <a href="http://lhzhang.com" title="sext vi">sext vi</a>
          </div>
        </footer>
      </div> <!-- main -->

      <!--Comment Start-->
      <script src="/media/js/jquery-1.7.1.min.js" type="text/javascript" charset="utf-8"></script>
      
      <!--Comment End-->

    <!--Google Analytics Start-->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-44607213-2', 'auto');
      ga('send', 'pageview');

    </script>
    <!--Google Analytics End-->

  </body>
</html>
